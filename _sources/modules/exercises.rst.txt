======================================
Practice Exercises â€” CFL & CFG Mastery
======================================

These exercises build your **conceptual fluency** step-by-step.  
Each problem includes a *hint*, *solution*, and sometimes a *visual derivation tree* (via Graphviz).  
Click each dropdown to reveal more as you solve.

----------------------------------------
**Question 07:** Construct CFG for :math:`L = \{a^n b^m c^m d^n\}`

.. raw:: html

   <details>
   <summary><strong>ðŸ’¡ Need a Hint?</strong></summary>

- Observe the symmetry between `a` â†” `d` (outer) and `b` â†” `c` (inner).  
- The pattern suggests **two nested pairs** of equal-length substrings.

.. raw:: html

   </details>

.. raw:: html

   <details>
   <summary><strong>ðŸ“˜ SOLUTION (Click to Expand)</strong></summary>

**CFG:**

.. code-block:: text

   S â†’ aSd | A  
   A â†’ bAc | bc

âœ… Example string: `abbccd` (n=1, m=2)

**Graphviz Derivation Tree:**

.. graphviz::

   digraph CFG7 {
     rankdir=TB;
     node [shape=circle, style=filled, fillcolor="#f9f9f9", fontname="Arial"];
     S -> a;
     S -> A;
     S -> d;
     A -> b;
     A -> A2 [label="A"];
     A -> c;
     A2 -> b;
     A2 -> c;
   }

.. admonition:: Concept Insight
   :class: tip  

   - Outer recursion handles `a` and `d` simultaneously.  
   - Inner recursion (A) pairs `b` with `c`.  
   - This grammar is context-free because both counts are checked **hierarchically**, not simultaneously.

.. raw:: html

   </details>


----------------------------------------
**Question 09:** PDA â†’ CFG for balanced parentheses

.. raw:: html

   <details>
   <summary><strong>ðŸ’¡ Need a Hint?</strong></summary>

- PDA pushes `(` onto the stack and pops when it sees `)`.  
- Think recursive pairing â€” each `(` must have a matching `)` later.  
- The CFG must express nested and sequential pairs.

.. raw:: html

   </details>

.. raw:: html

   <details>
   <summary><strong>ðŸ“˜ SOLUTION (Click to Expand)</strong></summary>

**CFG:**

.. code-block:: text

   S â†’ (S)S | Îµ

âœ… Example: `(()())`

**PDA Visualization:**

.. graphviz::

   digraph PDA9 {
     rankdir=LR;
     node [shape=circle, style=filled, fillcolor="#f9f9f9", fontname="Arial"];
     q0 [label="qâ‚€ (start)"];
     q1 [label="qâ‚"];
     qf [label="qf (final)", shape=doublecircle];
     q0 -> q1 [label="Îµ, Îµ â†’ $"];
     q1 -> q1 [label="(, Îµ â†’ ("];
     q1 -> q1 [label="), ( â†’ Îµ"];
     q1 -> qf [label="Îµ, $ â†’ Îµ"];
   }

.. admonition:: Concept Focus
   :class: hint  

   - Deterministic PDA (DPDA) â€” never needs guessing.  
   - Stack mirrors open parentheses; empty stack signals acceptance.  
   - Grammar mirrors PDA push/pop through recursive embedding.

.. raw:: html

   </details>


----------------------------------------
**Bonus Interactive Questions**
----------------------------------------

**Question 11:** Convert RE `(0|1)*01` into a CFG.

.. raw:: html

   <details><summary><strong>ðŸ’¡ Hint</strong></summary>
   Start with `(0|1)*` for arbitrary prefix, then concatenate `01`.
   </details>

.. raw:: html

   <details><summary><strong>ðŸ“˜ Solution</strong></summary>

.. code-block:: text

   S â†’ 0S | 1S | 01
   </details>


**Question 12:** Create CFG for palindromes with center `c` over `{a,b,c}`.  
*(e.g., `abccba`, `accca`)*

.. raw:: html

   <details><summary><strong>ðŸ“˜ Solution</strong></summary>

.. code-block:: text

   S â†’ aSa | bSb | c
   </details>


**Question 13:** CFG for :math:`a^i b^j` where `i â‰  j`.

.. raw:: html

   <details><summary><strong>ðŸ“˜ Solution</strong></summary>

.. code-block:: text

   S â†’ aSb | aS | Sb | a | b
   </details>


**Question 14:** RE â†’ CFG for `(ab)*`.

.. raw:: html

   <details><summary><strong>ðŸ“˜ Solution</strong></summary>

.. code-block:: text

   S â†’ abS | Îµ
   </details>


**Question 15:** CFG â†’ PDA for `S â†’ aSb | ab`.

.. raw:: html

   <details><summary><strong>ðŸ“˜ Solution</strong></summary>

.. code-block:: text

   PDA transitions:
   (qâ‚€, a, Îµ) â†’ (qâ‚€, A)
   (qâ‚€, b, A) â†’ (qâ‚€, Îµ)
   (qâ‚€, Îµ, $) â†’ (qf, Îµ)
   </details>


----------------------------------------
ðŸ§  Multiple Choice Quiz â€” Reinforcement
----------------------------------------

**Q1.** Which language is **not context-free**?  
A) `{a^n b^n}`â€ƒB) `{a^n b^n c^n}`â€ƒC) `{a^i b^j | i â‰  j}`â€ƒD) `{a^n b^m}`  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** B â€” requires tracking three counters.
   </details>

---

**Q2.** In CNF, each ruleâ€™s RHS has:  
A) One variableâ€ƒB) Two variables or one terminalâ€ƒC) Three symbolsâ€ƒD) Îµ always  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** B â€” CNF restricts RHS to 2 vars or 1 terminal.
   </details>

---

**Q3.** PDA accepting `{a^n b^n}` pushes for `a` and pops for?  
A) aâ€ƒB) bâ€ƒC) Îµâ€ƒD) none  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** B
   </details>

---

**Q4.** Every regular language is also:  
A) Context-freeâ€ƒB) Context-sensitiveâ€ƒC) Recursively enumerableâ€ƒD) None  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** A â€” regular âŠ‚ context-free.
   </details>

---

**Q5.** Which grammar type generates CFLs?  
A) Type 0â€ƒB) Type 1â€ƒC) Type 2â€ƒD) Type 3  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** C â€” Context-Free Grammar.
   </details>

---

**Q6.** For `S â†’ aSb | ab`, language is?  
A) `{a^n b^n}`â€ƒB) `{(ab)^n}`â€ƒC) `{a^n b^(n+1)}`â€ƒD) None  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** A
   </details>

---

**Q7.** In PDA, acceptance can be by:  
A) Final stateâ€ƒB) Empty stackâ€ƒC) Eitherâ€ƒD) None  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** C
   </details>

---

**Q8.** Ambiguous grammar example:  
A) `E â†’ E+E | id`â€ƒB) `S â†’ aSb | ab`â€ƒC) `S â†’ aS | bS | Îµ`â€ƒD) None  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** A â€” classic arithmetic ambiguity.
   </details>

---

**Q9.** PDAâ€™s stack enables:  
A) Linear memoryâ€ƒB) Nested recursion trackingâ€ƒC) Random accessâ€ƒD) Two-way search  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** B
   </details>

---

**Q10.** DPDA can accept:  
A) `{a^n b^n}`â€ƒB) `{ww}`â€ƒC) `{a^n b^n c^n}`â€ƒD) None  

.. raw:: html

   <details><summary><strong>âœ… Solution</strong></summary>
   **Answer:** A
   </details>
